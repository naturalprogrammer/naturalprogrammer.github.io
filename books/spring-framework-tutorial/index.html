<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="Sanjay Patel">
<title>Spring Framework And Dependency Injection For Beginners</title>
<style>
@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address styling not present in IE 8/9. */
[hidden] { display: none; }

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { background: #fff; /* 1 */ color: #000; /* 2 */ font-family: sans-serif; /* 3 */ -ms-text-size-adjust: 100%; /* 4 */ -webkit-text-size-adjust: 100%; /* 4 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

a:focus { outline: none; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }

pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }

kbd.keyseq { color: #555555; }

kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

p a > code:hover { color: #561309; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }

#toctitle { color: #7a2518; }

@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }

#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }

#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 3px double #ebebeb; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }

.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }

.listingblock > .content { position: relative; }

.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }

.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }

table.pyhltable { border: 0; margin-bottom: 0; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }

.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }

th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }

th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }

p.tableblock.header { color: #222222; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .8em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.qanda > ol > li > p > em:only-child { color: #00467f; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments, .listingblock .pygments code { background: #ffffff; }
.listingblock .pygments .tok-c { color: #008800; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { color: #a61717; background-color: #e3d2d2 } /* Error */
.listingblock .pygments .tok-k { color: #000080; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-ch { color: #008800; font-style: italic } /* Comment.Hashbang */
.listingblock .pygments .tok-cm { color: #008800; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #008080 } /* Comment.Preproc */
.listingblock .pygments .tok-cpf { color: #008800; font-style: italic } /* Comment.PreprocFile */
.listingblock .pygments .tok-c1 { color: #008800; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #008800; font-weight: bold } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #aa0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #999999 } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #555555 } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #aaaaaa } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #aa0000 } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #000080; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #000080; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #000080; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #000080; font-weight: bold } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #000080; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #000080; font-weight: bold } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #0000FF } /* Literal.Number */
.listingblock .pygments .tok-s { color: #0000FF } /* Literal.String */
.listingblock .pygments .tok-na { color: #FF0000 } /* Name.Attribute */
.listingblock .pygments .tok-nt { color: #000080; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-ow { font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #0000FF } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #0000FF } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #0000FF } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #0000FF } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #0000FF } /* Literal.Number.Oct */
.listingblock .pygments .tok-sa { color: #0000FF } /* Literal.String.Affix */
.listingblock .pygments .tok-sb { color: #0000FF } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #800080 } /* Literal.String.Char */
.listingblock .pygments .tok-dl { color: #0000FF } /* Literal.String.Delimiter */
.listingblock .pygments .tok-sd { color: #0000FF } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #0000FF } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #0000FF } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #0000FF } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #0000FF } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #0000FF } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #0000FF } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #0000FF } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #0000FF } /* Literal.String.Symbol */
.listingblock .pygments .tok-il { color: #0000FF } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Spring Framework And Dependency Injection For Beginners</h1>
<div class="details">
<span id="author" class="author">Sanjay Patel</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_about_the_course">About the course</a>
<ul class="sectlevel2">
<li><a href="#_what_we_ll_cover">What we&#8217;ll cover</a></li>
</ul>
</li>
<li><a href="#_before_you_begin">Before you begin</a>
<ul class="sectlevel2">
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_source_code">Source code</a></li>
<li><a href="#_help_and_support">Help and support</a></li>
</ul>
</li>
<li><a href="#_a_brief_introduction_to_spring_framework">A brief introduction to Spring Framework</a></li>
<li><a href="#_hello_world">Hello, world</a>
<ul class="sectlevel2">
<li><a href="#_creating_from_scratch">Creating from scratch</a></li>
<li><a href="#_using_spring_initializr">Using Spring Initializr</a></li>
<li><a href="#_using_an_ide">Using an IDE</a></li>
<li><a href="#_project_metadata">Project metadata</a>
<ul class="sectlevel3">
<li><a href="#_name">Name</a></li>
<li><a href="#_type">Type</a></li>
<li><a href="#_packaging">Packaging</a></li>
<li><a href="#_java_version">Java version</a></li>
<li><a href="#_group_and_artifact">Group and Artifact</a></li>
<li><a href="#_version">Version</a></li>
<li><a href="#_description">Description</a></li>
<li><a href="#_package">Package</a></li>
<li><a href="#_spring_boot_version">Spring Boot Version</a></li>
<li><a href="#_dependencies">Dependencies</a></li>
</ul>
</li>
<li><a href="#_source_code_so_far">Source code so far</a></li>
<li><a href="#_glancing_at_the_source_code">Glancing at the source code</a>
<ul class="sectlevel3">
<li><a href="#_pom_xml">pom.xml</a></li>
<li><a href="#_java_classes">Java classes</a></li>
<li><a href="#_other_folders_and_files">Other folders and files</a></li>
</ul>
</li>
<li><a href="#_running_the_application">Running the application</a></li>
<li><a href="#_coding_a_hello_controller">Coding a Hello Controller</a>
<ul class="sectlevel3">
<li><a href="#_source_code_so_far_2">Source code so far</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_dependency_injection_setting_the_stage">Dependency Injection - Setting The Stage</a>
<ul class="sectlevel2">
<li><a href="#_coding_the_service">Coding the service</a></li>
<li><a href="#_testing_the_service">Testing the service</a></li>
<li><a href="#_source_code_so_far_3">Source code so far</a></li>
</ul>
</li>
<li><a href="#_dependency_injection_the_basics">Dependency Injection - The Basics</a>
<ul class="sectlevel2">
<li><a href="#_the_problem">The Problem</a></li>
<li><a href="#_the_spring_way">The Spring Way</a>
<ul class="sectlevel3">
<li><a href="#_so_what_s_happening">So, what’s happening?</a></li>
</ul>
</li>
<li><a href="#_summary">Summary</a></li>
<li><a href="#_source_code_so_far_4">Source code so far</a></li>
</ul>
</li>
<li><a href="#_injecting_beans">Injecting Beans</a>
<ul class="sectlevel2">
<li><a href="#_applying_autowired_on_methods">Applying @Autowired on methods</a></li>
<li><a href="#_multiple_beans_how_to_inject_the_right_one">Multiple beans – how to inject the right one?</a>
<ul class="sectlevel3">
<li><a href="#_dependency_injection_by_name">Dependency injection by name</a></li>
<li><a href="#_changing_the_name_of_a_bean">Changing the name of a bean</a></li>
</ul>
</li>
<li><a href="#_source_code_so_far_5">Source code so far</a>
<ul class="sectlevel3">
<li><a href="#_the_primary_annotation">The @Primary annotation</a></li>
<li><a href="#_bean_qualifiers">Bean qualifiers</a></li>
</ul>
</li>
<li><a href="#_source_code_so_far_6">Source code so far</a></li>
<li><a href="#_constructor_setter_or_field_injection">Constructor, setter or field injection?</a></li>
<li><a href="#_resource_and_inject">@Resource and @Inject</a></li>
</ul>
</li>
<li><a href="#_configuring_beans">Configuring Beans</a>
<ul class="sectlevel2">
<li><a href="#_component_annotations">Component annotations</a></li>
<li><a href="#_component_scanning">Component scanning</a></li>
<li><a href="#_configuration_classes">Configuration classes</a></li>
<li><a href="#_source_code_so_far_7">Source code so far</a></li>
<li><a href="#_xml_configuration">XML Configuration</a></li>
</ul>
</li>
<li><a href="#_application_properties">Application properties</a>
<ul class="sectlevel2">
<li><a href="#_deploying_to_a_different_environment">Deploying to a different environment</a></li>
<li><a href="#_source_code_so_far_8">Source code so far</a></li>
</ul>
</li>
<li><a href="#_spring_profiles">Spring profiles</a>
<ul class="sectlevel2">
<li><a href="#_source_code_so_far_9">Source code so far</a></li>
</ul>
</li>
<li><a href="#_conditional_annotations">Conditional annotations</a>
<ul class="sectlevel2">
<li><a href="#_source_code_so_far_10">Source code so far</a></li>
</ul>
</li>
<li><a href="#_sending_smtp_mails">Sending SMTP Mails</a>
<ul class="sectlevel2">
<li><a href="#_configuring_a_javamailsender">Configuring a JavaMailSender</a></li>
<li><a href="#_coding_our_smtpmailsender">Coding our SmtpMailSender</a></li>
<li><a href="#_how_to_inject_javamailsender">How to inject JavaMailSender</a></li>
<li><a href="#_source_code_so_far_11">Source code so far</a></li>
</ul>
</li>
<li><a href="#_caching_bean_methods">Caching Bean Methods</a>
<ul class="sectlevel2">
<li><a href="#_source_code_so_far_12">Source code so far</a></li>
</ul>
</li>
<li><a href="#_next_steps">Next Steps</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This book is the <em>Module I</em> of our course <a href="http://www.naturalprogrammer.com/spring-tutorial/">Spring Framework Rapid Tutorial For Real World Development</a>. Here we&#8217;ll quickly get started with Spring Framework, and then learn its commonly used dependency injection features.  It&#8217;s going to be very helpful when learning Spring&#8201;&#8212;&#8201;whether you take the full course or not.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Prefer video tutorials? Visit <a href="https://www.udemy.com/spring-framework-video-tutorial">here</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about_the_course">About the course</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="http://www.naturalprogrammer.com/spring-tutorial/">course</a>, of which this book is the first module, is a beginner&#8217;s rapid guide for learning how to develop elegant real-world applications and APIs using latest Spring projects in the right ways. If you are new to Spring Framework, or you know some old version of Spring and want to rapidly catch up, then this will be your fastest route to become a Spring ninja. Instead of learning in a traditional way, feature-by-feature, here we will take a problem-solution approach. We will go deep into the commonly useful things, and touch upon the less common things in a brief manner, leaving up to you to find out more on your own, when needed. This would be the fastest and intuitive way to learn any vast and practical subject like Spring, as you&#8217;ll see.</p>
</div>
<div class="paragraph">
<p>"But Spring already has excellent reference material and official guides. Also there are numerous books, tutorials and blog posts around. So, why another course?"&#8201;&#8212;&#8201;you may ask.</p>
</div>
<div class="paragraph">
<p>Spring’s reference material, although great for reference, doesn&#8217;t serve as a step-by-step learning material. The official guides in turn are good for getting started, but only on some piecemeal topics. Most of the books and tutorials, on the other hand, teach Spring in a classroom manner. They try to cover all the topics, but don’t go deep into anyone. Consequently, after going through those, you’ll get familiar with Spring, but still be far away from coding real-world applications. At work with tight schedules, you’ll then be wasting your time to figure out solutions even for the common real-world scenarios. Some Stackoverflow or blog posts may help, but most of those will be obsolete – because Spring advances very fast.</p>
</div>
<div class="paragraph">
<p>So we thought to come up with this lean and agile real-world oriented course. Here we’ll begin from zero, assuming that you are absolutely new to Spring. But as we&#8217;ll progress, we&#8217;ll go deep into the scenarios that are typically needed in most real-world projects. We will use latest Spring versions, such as Spring 5 and Spring Boot 2, and see how to write neat and maintainable code using their best practices. Fear not if you are still using Spring 4 though&#8201;&#8212;&#8201;we&#8217;ll discuss about the incompatibilities and their solutions..</p>
</div>
<div class="sect2">
<h3 id="_what_we_ll_cover">What we&#8217;ll cover</h3>
<div class="paragraph">
<p><em>In Module I</em>, which is this book, we&#8217;ll first learn how to create a new Spring project and code some "hello, world" stuff. Then we&#8217;ll explore Spring&#8217;s dependency injection concepts and its commonly used real-world dependency injection features&#8201;&#8212;&#8201;like profiles, application properties, conditional annotations etc.&#8201;&#8212;&#8201;using Java configuration rather than XML. Even if you don&#8217;t take the full course, this module is an independent course in itself that you can go through before taking any other Spring course.</p>
</div>
<div class="paragraph">
<p><em>In Module II</em>, we’ll learn the concepts and useful real-world features of Spring MVC.</p>
</div>
<div class="paragraph">
<p><em>In Module III</em>, we&#8217;ll dive into the commonly used Spring projects such as Spring Security, Spring Data, Spring AoP, and also some advanced Spring MVC stuff such as custom validation, validation groups and exception handling. We’ll also walk through coding a real-world user module having features like signup, login, verify email, forgot password, display and edit user profile. In fact, when developing a new Spring application, you can fork our source code and build upon that.</p>
</div>
<div class="paragraph">
<p>Being in the era of services and microservices rather than full-stack applications, in <em>Module IV</em>, we&#8217;ll learn how to develop real-world REST services using Spring and its latest best practices. In fact, we&#8217;ll go through a complete blueprint having many advanced features, such as social sign-on (using multiple providers like Google and Facebook), captcha validation, stateless API key authentication, cross-cutting validation and exception handling, etc.. That blueprint also includes a robust user module, and is actually packaged as a configurable and extensible open source library, named <a href="https://github.com/naturalprogrammer/spring-lemon">Spring Lemon</a>. You can include that in your projects and, with some configuration, start coding your business logic straightaway.</p>
</div>
<div class="paragraph">
<p>To know more about the full course and the content, visit our <a href="http://www.naturalprogrammer.com/spring-tutorial/">landing page</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_before_you_begin">Before you begin</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prerequisites">Prerequisites</h3>
<div class="paragraph">
<p>To follow this book, you should already be knowing core Java and its object oriented features like classes and interfaces. Knowledge of web development will help but isn’t mandatory.</p>
</div>
<div class="paragraph">
<p>To follow the practical steps, you also should have JDK 8 and some IDE installed. We&#8217;ve used Oracle JDK 8 and Spring Tool Suite on a Windows 10 machine.</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_code">Source code</h3>
<div class="paragraph">
<p>This book ia a step-by-step walkthrough, accompanied with source code available at <a href="https://github.com/naturalprogrammer/np-spring5-tutorial">GitHub</a>. The code is tagged by lessons, and we&#8217;ll provide you the link to the exact tag below each lesson. Even if you are new to Git, you can find a downloadable zip by following that link.</p>
</div>
</div>
<div class="sect2">
<h3 id="_help_and_support">Help and support</h3>
<div class="ulist">
<ul>
<li>
<p>Community help is available at <a href="https://stackoverflow.com/questions/tagged/np-spring">stackoverflow.com</a>, under the <code>np-spring</code> tag. Do not forget to tag your questions with <code>np-spring</code>&#8201;&#8212;&#8201;otherwise we’ll not get notified.</p>
</li>
<li>
<p>For any bug, submit an issue <a href="https://github.com/naturalprogrammer/np-spring5-tutorial/issues">here</a>. But please check first that the issue isn&#8217;t already reported.</p>
</li>
<li>
<p>Mentoring, training and professional help is provided by <a href="http://www.naturalprogrammer.com/consulting/">naturalprogrammer.com</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_brief_introduction_to_spring_framework">A brief introduction to Spring Framework</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://spring.io">Spring</a> is one of the most popular frameworks for developing web and enterprise applications. Its core strength lies in its powerful <em>dependency injection</em> mechanism, which makes it a component based framework. This enabls us to develop an
application by assembling some built-in, third party and self-coded components.</p>
</div>
<div class="paragraph">
<p>In addition to the core framework, Spring also has many other projects, such as Spring Data and Spring Security. Many of these again have multiple modules. For example, Spring Data has modules such as Spring Data JPA and Spring Data MongoDB. All these projects and modules come with rich sets of built-in components, which can be assembled along with your own components, and great applications can be built this way.</p>
</div>
<div class="paragraph">
<p>But assembling a Spring application this way is cumbersome, because, you&#8217;ll need to handpick the right JARs and components, and configure and assemble those properly. That&#8217;s why Spring came up with a project called <a href="http://projects.spring.io/spring-boot/">Spring Boot</a>, which does it automatically&#8201;&#8212;&#8201;based on factors like the JARs and application properties provided. Spring Boot doesn’t take the control away from us though – its automation can be easily overridden where needed.</p>
</div>
<div class="paragraph">
<p>In summary, Spring Boot makes a developer&#8217;s life very easy, and is highly recommended nowadays for almost all kinds of projects. In fact, we&#8217;re going to use it in this course.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hello_world">Hello, world</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So, let’s begin by creating a “Hello, world” application! There are multiple ways to create new Spring projects. Here are the common ones:</p>
</div>
<div class="sect2">
<h3 id="_creating_from_scratch">Creating from scratch</h3>
<div class="paragraph">
<p>Because Spring projects are standard Java projects, you can just create those manually. In fact, the Spring guides like <a href="https://spring.io/guides/gs/rest-service/">this one</a> show how to do it that way. We won’t recommend it though&#8201;&#8212;&#8201;there are easier ways available.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_spring_initializr">Using Spring Initializr</h3>
<div class="paragraph">
<p>For easily creating new projects, Spring comes with an <em>Initializr wizard</em> available at <a href="https://start.spring.io">start.spring.io</a>. You can feed your project metadata there and download a zip file, which you can unzip and import in your IDE.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_an_ide">Using an IDE</h3>
<div class="paragraph">
<p>IDEs go one step further. For example, <a href="https://spring.io/tools/sts">Spring Tool Suite</a> provides a <em>Spring Starter Project</em> wizard, available as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/spring-starter-project-menu.png" alt="spring starter project menu">
</div>
<div class="title">Figure 1. Opening the Spring Starter Project wizard</div>
</div>
<div class="paragraph">
<p>If you have IntellijIDEA, you&#8217;ll find a wizard at <em>File &#8594; New &#8594; Project</em>, looking as below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-new-project-wizard.png" alt="intellij new project wizard">
</div>
<div class="title">Figure 2. Spring Initializr wizard in IntellijIDEA</div>
</div>
<div class="paragraph">
<p>These wizards in fact use the same <em>start.spring.io</em> service under the hood, and ask for the same set of metadata.</p>
</div>
<div class="paragraph">
<p>So, ready to take off? Open your IDE, and follow me.</p>
</div>
</div>
<div class="sect2">
<h3 id="_project_metadata">Project metadata</h3>
<div class="paragraph">
<p>Whether you use <em>start.spring.io</em> or an IDE, you&#8217;ll need to provide the following metadata.</p>
</div>
<div class="sect3">
<h4 id="_name">Name</h4>
<div class="paragraph">
<p>Give a nice name to your project. Better to use small alphanumeric characters and dashes only. We chose <code>np-spring5-tutorial</code> for the accompanying <a href="https://github.com/naturalprogrammer/np-spring5-tutorial">sample project</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_type">Type</h4>
<div class="paragraph">
<p>It&#8217;s the build tool to use. New to build tools? They help compile and package our projects. No problem if you are new to these – we are going to discuss whatever is needed.</p>
</div>
<div class="paragraph">
<p>You’ll see a couple of options here: <code>Maven</code> and <code>Gradle</code>. Maven is very popular, whereas Gradle is newer and more powerful. We generally recommend Maven because of its better ecosystem and tooling support.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you instead choose Gradle, you&#8217;ll find three options in STS: <em>Buildship 1.x</em>, <em>Buildship 2.x</em> and <em>STS</em>. These are actually STS plugins, and <code>Buildship 2.x</code> is the latest one which should be preferred.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_packaging">Packaging</h4>
<div class="paragraph">
<p>You’ll see two options here: <code>JAR</code> and <code>WAR</code>. Whatever you choose, our build is going to be a <em>über</em> or <em>fat</em> executable&#8201;&#8212;&#8201;with tomcat and all the dependent JARs embedded&#8201;&#8212;&#8201;which can be run standalone by using the standard <code>java -jar</code> command. These über executables are preferred nowadays, over traditional WARs, because these are easily deployable, e.g. at cloud services.</p>
</div>
<div class="paragraph">
<p>So, let&#8217;s choose <code>JAR</code>. We can easily change it later if needed, e.g. when <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-jsp-limitations">using JSP</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_java_version">Java version</h4>
<div class="paragraph">
<p>Spring 4.x still supports Java 6 and 7, but we are going to use Spring 5. So, choose <code>Java 1.8</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_group_and_artifact">Group and Artifact</h4>
<div class="paragraph">
<p><em>Group</em> and <em>Artifact</em> uniquely identify a project. Group identifies a group to which the project belongs, whereas Artifact identifies the project inside the group.</p>
</div>
<div class="paragraph">
<p>Group names typically begin with a domain name owned by the project creator, in reverse order. For example, the group name of our projects would be <code>com.naturalprogrammer</code>, because we own <em>naturalprogrammer.com</em>. No problem if you don&#8217;t own a domain – you can use some name that you feel would be unique. Unless the project is going to be used along with some other clashing projects, it won&#8217;t be a problem.</p>
</div>
<div class="paragraph">
<p>The <em>Artifact</em> would typically be equal to the name of the project, e.g. <code>np-spring5-tutorial</code> in our case.</p>
</div>
</div>
<div class="sect3">
<h4 id="_version">Version</h4>
<div class="paragraph">
<p>This is the <em>version</em> of the project. Leave it untouched for now.</p>
</div>
</div>
<div class="sect3">
<h4 id="_description">Description</h4>
<div class="paragraph">
<p>A one line description of the project.</p>
</div>
</div>
<div class="sect3">
<h4 id="_package">Package</h4>
<div class="paragraph">
<p>This is the root package name of your application. It&#8217;s typically formed by joining the group and the artifact, e.g. <code>com.naturalprogrammer.spring5tutorial</code>. Remember that <code>-</code> isn’t allowed here&#8201;&#8212;&#8201;you can either omit those or replace those with underscores.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you&#8217;re using STS, you may need to press <code>Next</code> now.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_spring_boot_version">Spring Boot Version</h4>
<div class="paragraph">
<p>This is the Spring Boot release to use. The latest stable release as of this writing is <em>1.x.x</em>, which brings in Spring 4. But we want to use Spring 5, and so choose the latest milestone or RC release. We had chosen <code>2.0.0 M2</code> when creating the accompanying project.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dependencies">Dependencies</h4>
<div class="paragraph">
<p>This widget asks us to choose the <em>dependencies</em>&#8201;&#8212;&#8201;i.e. the libraries our application will be using. Whatever you choose here goes into the build configuration file. The build tool would then automatically download and include the related JARs in our project.</p>
</div>
<div class="paragraph">
<p>Choose just <code>Web</code> for now. We can easily add more dependencies to the
configuration file later.</p>
</div>
<div class="paragraph">
<p>With this much metadata fed, you can now generate the project! If you are doing this first time, your IDE will take some time to download all the JARs to your local system.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_source_code_so_far">Source code so far</h3>
<div class="paragraph">
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/new-project">Click here</a> to browse and download the source code so far.</p>
</div>
<div class="paragraph">
<p>If you know Git, looking at the above URL you&#8217;ll have figured out that the project is <a href="https://github.com/naturalprogrammer/np-spring5-tutorial">hosted at GitHub</a>, with tags corresponding to the topics of this book. For example, <code>new-project</code> is the tag name for the source code so far.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em>How to import the downloaded project to STS?</em></p>
</div>
<div class="paragraph">
<p>Use the <em>File &#8594; Import &#8594; Existing Maven Projects</em> wizard:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/sts-maven-import-wizard.png" alt="sts maven import wizard">
</div>
<div class="title">Figure 3. Importing existing Maven projects</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_glancing_at_the_source_code">Glancing at the source code</h3>
<div class="paragraph">
<p>Browsing the source code of the generated project will tell you that it’s just a java application, with the standard <a href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">maven layout</a>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-project-layout.png" alt="new project layout">
</div>
<div class="title">Figure 4. New project layout</div>
</div>
<div class="paragraph">
<p>Let&#8217;s give a look inside it.</p>
</div>
<div class="sect3">
<h4 id="_pom_xml">pom.xml</h4>
<div class="paragraph">
<p>At the root of the project, you’ll find a file named <code>pom.xml</code>, which is the configuration file that Maven uses to know about the project. It&#8217;ll look as below:</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span></span><span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tok-nt">&lt;project</span> <span class="tok-na">xmlns=</span><span class="tok-s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="tok-na">xmlns:xsi=</span><span class="tok-s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
	<span class="tok-na">xsi:schemaLocation=</span><span class="tok-s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="tok-nt">&gt;</span>
	<span class="tok-nt">&lt;modelVersion&gt;</span>4.0.0<span class="tok-nt">&lt;/modelVersion&gt;</span>

	<span class="tok-nt">&lt;groupId&gt;</span>com.naturalprogrammer<span class="tok-nt">&lt;/groupId&gt;</span>
	<span class="tok-nt">&lt;artifactId&gt;</span>np-spring5-tutorial<span class="tok-nt">&lt;/artifactId&gt;</span>
	<span class="tok-nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="tok-nt">&lt;/version&gt;</span>
	<span class="tok-nt">&lt;packaging&gt;</span>jar<span class="tok-nt">&lt;/packaging&gt;</span>

	<span class="tok-nt">&lt;name&gt;</span>np-spring5-tutorial<span class="tok-nt">&lt;/name&gt;</span>
	<span class="tok-nt">&lt;description&gt;</span>Demo project for Spring Boot<span class="tok-nt">&lt;/description&gt;</span>

	<span class="tok-nt">&lt;parent&gt;</span>
		<span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
		<span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="tok-nt">&lt;/artifactId&gt;</span>
		<span class="tok-nt">&lt;version&gt;</span>2.0.0.M2<span class="tok-nt">&lt;/version&gt;</span>
		<span class="tok-nt">&lt;relativePath/&gt;</span> <span class="tok-c">&lt;!-- lookup parent from repository --&gt;</span>
	<span class="tok-nt">&lt;/parent&gt;</span>

	<span class="tok-nt">&lt;properties&gt;</span>
		<span class="tok-nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tok-nt">&lt;/project.build.sourceEncoding&gt;</span>
		<span class="tok-nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tok-nt">&lt;/project.reporting.outputEncoding&gt;</span>
		<span class="tok-nt">&lt;java.version&gt;</span>1.8<span class="tok-nt">&lt;/java.version&gt;</span>
	<span class="tok-nt">&lt;/properties&gt;</span>

<span class="hll">	<span class="tok-nt">&lt;dependencies&gt;</span>
</span><span class="hll">		<span class="tok-nt">&lt;dependency&gt;</span>
</span><span class="hll">			<span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
</span><span class="hll">			<span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="tok-nt">&lt;/artifactId&gt;</span>
</span><span class="hll">		<span class="tok-nt">&lt;/dependency&gt;</span>
</span><span class="hll">
</span><span class="hll">		<span class="tok-nt">&lt;dependency&gt;</span>
</span><span class="hll">			<span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
</span><span class="hll">			<span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="tok-nt">&lt;/artifactId&gt;</span>
</span><span class="hll">			<span class="tok-nt">&lt;scope&gt;</span>test<span class="tok-nt">&lt;/scope&gt;</span>
</span><span class="hll">		<span class="tok-nt">&lt;/dependency&gt;</span>
</span><span class="hll">	<span class="tok-nt">&lt;/dependencies&gt;</span>
</span>
	<span class="tok-nt">&lt;build&gt;</span>
		<span class="tok-nt">&lt;plugins&gt;</span>
<span class="hll">			<span class="tok-nt">&lt;plugin&gt;</span>
</span><span class="hll">				<span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
</span><span class="hll">				<span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
</span><span class="hll">			<span class="tok-nt">&lt;/plugin&gt;</span>
</span>		<span class="tok-nt">&lt;/plugins&gt;</span>
	<span class="tok-nt">&lt;/build&gt;</span>

	<span class="tok-nt">&lt;repositories&gt;</span>
		<span class="tok-nt">&lt;repository&gt;</span>
			<span class="tok-nt">&lt;id&gt;</span>spring-snapshots<span class="tok-nt">&lt;/id&gt;</span>
			<span class="tok-nt">&lt;name&gt;</span>Spring Snapshots<span class="tok-nt">&lt;/name&gt;</span>
			<span class="tok-nt">&lt;url&gt;</span>https://repo.spring.io/snapshot<span class="tok-nt">&lt;/url&gt;</span>
			<span class="tok-nt">&lt;snapshots&gt;</span>
				<span class="tok-nt">&lt;enabled&gt;</span>true<span class="tok-nt">&lt;/enabled&gt;</span>
			<span class="tok-nt">&lt;/snapshots&gt;</span>
		<span class="tok-nt">&lt;/repository&gt;</span>
		<span class="tok-nt">&lt;repository&gt;</span>
			<span class="tok-nt">&lt;id&gt;</span>spring-milestones<span class="tok-nt">&lt;/id&gt;</span>
			<span class="tok-nt">&lt;name&gt;</span>Spring Milestones<span class="tok-nt">&lt;/name&gt;</span>
			<span class="tok-nt">&lt;url&gt;</span>https://repo.spring.io/milestone<span class="tok-nt">&lt;/url&gt;</span>
			<span class="tok-nt">&lt;snapshots&gt;</span>
				<span class="tok-nt">&lt;enabled&gt;</span>false<span class="tok-nt">&lt;/enabled&gt;</span>
			<span class="tok-nt">&lt;/snapshots&gt;</span>
		<span class="tok-nt">&lt;/repository&gt;</span>
	<span class="tok-nt">&lt;/repositories&gt;</span>

	<span class="tok-nt">&lt;pluginRepositories&gt;</span>
		<span class="tok-nt">&lt;pluginRepository&gt;</span>
			<span class="tok-nt">&lt;id&gt;</span>spring-snapshots<span class="tok-nt">&lt;/id&gt;</span>
			<span class="tok-nt">&lt;name&gt;</span>Spring Snapshots<span class="tok-nt">&lt;/name&gt;</span>
			<span class="tok-nt">&lt;url&gt;</span>https://repo.spring.io/snapshot<span class="tok-nt">&lt;/url&gt;</span>
			<span class="tok-nt">&lt;snapshots&gt;</span>
				<span class="tok-nt">&lt;enabled&gt;</span>true<span class="tok-nt">&lt;/enabled&gt;</span>
			<span class="tok-nt">&lt;/snapshots&gt;</span>
		<span class="tok-nt">&lt;/pluginRepository&gt;</span>
		<span class="tok-nt">&lt;pluginRepository&gt;</span>
			<span class="tok-nt">&lt;id&gt;</span>spring-milestones<span class="tok-nt">&lt;/id&gt;</span>
			<span class="tok-nt">&lt;name&gt;</span>Spring Milestones<span class="tok-nt">&lt;/name&gt;</span>
			<span class="tok-nt">&lt;url&gt;</span>https://repo.spring.io/milestone<span class="tok-nt">&lt;/url&gt;</span>
			<span class="tok-nt">&lt;snapshots&gt;</span>
				<span class="tok-nt">&lt;enabled&gt;</span>false<span class="tok-nt">&lt;/enabled&gt;</span>
			<span class="tok-nt">&lt;/snapshots&gt;</span>
		<span class="tok-nt">&lt;/pluginRepository&gt;</span>
	<span class="tok-nt">&lt;/pluginRepositories&gt;</span>


<span class="tok-nt">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Most metadata that we fed when creating the project are placed in it. Notice the <mark>highlighted</mark> portion above&#8201;&#8212;&#8201;it contains the dependencies, and the <em>spring-boot-maven-plugin</em> build plugin. The dependencies tell Maven what all other projects this project depends on, so that Maven will pull the required JARs and put those in the classpath. Maven does this recursively, i.e., the JARs on which the dependencies depend on will also be pulled and put onto the classpath, and so on.</p>
</div>
<div class="paragraph">
<p>The <em>spring-boot-maven-plugin</em> is used for packaging the application as a über JAR or WAR, which will have tomcat and all the dependent JARs embedded. That JAR can then be run just by using <em>java -jar</em>, as below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>java -jar spring5-tutorial-0.0.1-SNAPSHOT.jar</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java_classes">Java classes</h4>
<div class="paragraph">
<p>The wizard also created a couple of Java classes, as shown below:</p>
</div>
<div class="listingblock">
<div class="title">NpSpring5TutorialApplication.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.boot.SpringApplication</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="tok-o">;</span>

<span class="tok-nd">@SpringBootApplication</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">NpSpring5TutorialApplication</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
<span class="hll">		<span class="tok-n">SpringApplication</span><span class="tok-o">.</span><span class="tok-na">run</span><span class="tok-o">(</span><span class="tok-n">NpSpring5TutorialApplication</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">,</span> <span class="tok-n">args</span><span class="tok-o">);</span>
</span>	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the main class, and the highlighted <code>SpringApplication.run</code> configures and runs the application.</p>
</div>
<div class="listingblock">
<div class="title">NpSpring5TutorialApplicationTests.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.junit.Test</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.junit.runner.RunWith</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.boot.test.context.SpringBootTest</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.test.context.junit4.SpringRunner</span><span class="tok-o">;</span>

<span class="tok-nd">@RunWith</span><span class="tok-o">(</span><span class="tok-n">SpringRunner</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">)</span>
<span class="tok-nd">@SpringBootTest</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">NpSpring5TutorialApplicationTests</span> <span class="tok-o">{</span>

	<span class="tok-nd">@Test</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">contextLoads</span><span class="tok-o">()</span> <span class="tok-o">{</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is just an empty test class.</p>
</div>
</div>
<div class="sect3">
<h4 id="_other_folders_and_files">Other folders and files</h4>
<div class="paragraph">
<p>Under <em>src/main/resources</em>, you’ll find a couple of empty folders and an empty <code>application.properties</code> file. We’ll discuss about those later.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_application">Running the application</h3>
<div class="paragraph">
<p>Let&#8217;s now see the application running!</p>
</div>
<div class="paragraph">
<p>In STS, using the <a href="https://spring.io/blog/2015/10/08/the-spring-boot-dashboard-in-sts-part-1-local-boot-apps">Boot Dashboard</a> is the best way to run Spring Boot applications. If it&#8217;s not visible, open it by clicking on the icon shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/boot-dashboard-icon.png" alt="boot dashboard icon">
</div>
<div class="title">Figure 5. Boot Dashboard icon</div>
</div>
<div class="paragraph">
<p>The dashboard looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/using-boot-dashboard.png" alt="using boot dashboard">
</div>
<div class="title">Figure 6. Boot Dashboard</div>
</div>
<div class="paragraph">
<p>As shown above, first select the application there, and then click on the debug (or run) button to run it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Other ways to run the application in STS will be to select either the project or the main class (or right click on the project or the main class), click on the <em>Debug</em> or <em>Run</em> button on the toolbar, and then to select either <em>Java Application</em> or <em>Spring Boot App</em>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_coding_a_hello_controller">Coding a Hello Controller</h3>
<div class="paragraph">
<p>But running the application doesn&#8217;t do anything except just writing a few lines to the console. To see some action, let’s code a <em>controller class</em> and a <em>request handler</em> method in that. These terms look like alians? Don&#8217;t worry, you don&#8217;t need to know about these now. Just carry on.</p>
</div>
<div class="paragraph">
<p>So, create a new package inside the root package, say <em>controllers</em>, and create a new class in that, say <code>HelloController</code>.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The <em>controllers</em> package&#8201;&#8212;&#8201;and in fact any package we&#8217;ll be creating in this tutorial&#8201;&#8212;&#8201;must be a sub-package of the root package, i.e. com.naturalprogrammer.spring5tutorial. Why so? We&#8217;ll discussed that in a later section.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then, code <em>HelloController</em> as below:</p>
</div>
<div class="listingblock">
<div class="title">HelloController.java</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial.controllers</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.web.bind.annotation.RestController</span><span class="tok-o">;</span>

<span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">HelloController</span> <span class="tok-o">{</span>

	<span class="tok-nd">@RequestMapping</span><span class="tok-o">(</span><span class="tok-s">&quot;/hello&quot;</span><span class="tok-o">)</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">hello</span><span class="tok-o">()</span> <span class="tok-o">{</span>

		<span class="tok-k">return</span> <span class="tok-s">&quot;Hello, world&quot;</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, press the Debug button on the Boot Dashboard to rerun the application. Then visit <a href="http://localhost:8080/hello">http://localhost:8080/hello</a> on a browser, and you&#8217;ll see "Hello, world!"</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hello-world.png" alt="hello world">
</div>
<div class="title">Figure 7. Hello, world</div>
</div>
<div class="paragraph">
<p><em>But how does this work?</em> Not yet the rigt time to discuss about that. Instead, next section onwards, we’ll explore Spring’s DI features.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Those with some knowledge of Spring MVC would notice that we could have used <em>@GetMapping</em> instead of the <em>@RequestMapping</em>. But we thought to use @RequestMapping in this module, keeping @GetMapping etc. for <a href="http://www.naturalprogrammer.com/spring-tutorial/">Module II</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_source_code_so_far_2">Source code so far</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/hello-world">Source code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependency_injection_setting_the_stage">Dependency Injection - Setting The Stage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we&#8217;ll code a simple service for sending emails, which&#8217;ll help us understand dependency injection concepts later.</p>
</div>
<div class="sect2">
<h3 id="_coding_the_service">Coding the service</h3>
<div class="paragraph">
<p>So, let&#8217;s code an interface, named <code>MailSender</code>, and a couple of its implementations, named <code>SmtpMailSender</code> and <code>MockMailSender</code>. SmtpMailSender
will be used for sending SMTP mails, whereas MockMailSender will just write the mail content to the console.</p>
</div>
<div class="paragraph">
<p>Let’s start by creating a new package in the root package, say <code>mail</code>, and then create the following:</p>
</div>
<div class="listingblock">
<div class="title">MailSender interface</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial.mail</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">MailSender</span> <span class="tok-o">{</span>

	<span class="tok-kt">void</span> <span class="tok-nf">send</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">to</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">subject</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">body</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As you see, the <code>send</code> method above takes three parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>to</em>: the email id to which the mail will be sent</p>
</li>
<li>
<p><em>subject</em>: the subject of the mail</p>
</li>
<li>
<p><em>body</em>: the body of the mail</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Time to code the implementations:</p>
</div>
<div class="listingblock">
<div class="title">MockMailSender</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial.mail</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.apache.commons.logging.Log</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.apache.commons.logging.LogFactory</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MockMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">Log</span> <span class="tok-n">log</span> <span class="tok-o">=</span> <span class="tok-n">LogFactory</span><span class="tok-o">.</span><span class="tok-na">getLog</span><span class="tok-o">(</span><span class="tok-n">MockMailSender</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>

	<span class="tok-nd">@Override</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">send</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">to</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">subject</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">body</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">info</span><span class="tok-o">(</span><span class="tok-s">&quot;Sending MOCK mail to &quot;</span> <span class="tok-o">+</span> <span class="tok-n">to</span><span class="tok-o">);</span>
		<span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">info</span><span class="tok-o">(</span><span class="tok-s">&quot;with subject &quot;</span> <span class="tok-o">+</span> <span class="tok-n">subject</span><span class="tok-o">);</span>
		<span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">info</span><span class="tok-o">(</span><span class="tok-s">&quot;and body &quot;</span> <span class="tok-o">+</span> <span class="tok-n">body</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As you see, MockMailSender just writes the mail onto the log.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Logging in Spring Boot</div>
<div class="paragraph">
<p>In <em>MockMailSender</em> above, we&#8217;ve used commons logging for the logging. But it&#8217;s actually not commons logging. Instead, it&#8217;s a wrapper around SLF4J, and SLF4J will in turn use Logback by default. The log, by default is written to the console, but it can be configured the way you want.</p>
</div>
<div class="paragraph">
<p>To know more about logging in Spring Boot, see its documentation <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html">here</a>.</p>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">SmtpMailSender</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</div></td><td class="code"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial.mail</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.apache.commons.logging.Log</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.apache.commons.logging.LogFactory</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SmtpMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-n">Log</span> <span class="tok-n">log</span> <span class="tok-o">=</span> <span class="tok-n">LogFactory</span><span class="tok-o">.</span><span class="tok-na">getLog</span><span class="tok-o">(</span><span class="tok-n">SmtpMailSender</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">);</span>

	<span class="tok-nd">@Override</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">send</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">to</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">subject</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">body</span><span class="tok-o">)</span> <span class="tok-o">{</span>

<span class="hll">		<span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">info</span><span class="tok-o">(</span><span class="tok-s">&quot;Sending SMTP mail to &quot;</span> <span class="tok-o">+</span> <span class="tok-n">to</span><span class="tok-o">);</span>
</span>		<span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">info</span><span class="tok-o">(</span><span class="tok-s">&quot;with subject &quot;</span> <span class="tok-o">+</span> <span class="tok-n">subject</span><span class="tok-o">);</span>
		<span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">info</span><span class="tok-o">(</span><span class="tok-s">&quot;and body &quot;</span> <span class="tok-o">+</span> <span class="tok-n">body</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>"What? SmtpMailSender as well just writes to the log?"</p>
</div>
<div class="paragraph">
<p>Yes, it&#8217;ll eventually send actual SMTP mails, but for now let it be simple. Notice that currently the only difference between it and the MockMailSender is the word <mark>SMTP</mark> in line 13.</p>
</div>
</div>
<div class="sect2">
<h3 id="_testing_the_service">Testing the service</h3>
<div class="paragraph">
<p>For testing the service, let’s now code a <code>MailController</code> class in the <em>controllers</em> package, as below:</p>
</div>
<div class="listingblock">
<div class="title">SmtpMailSender</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial.controllers</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.web.bind.annotation.RestController</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial.mail.MailSender</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial.mail.MockMailSender</span><span class="tok-o">;</span>

<span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailController</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">MockMailSender</span><span class="tok-o">();</span>

	<span class="tok-nd">@RequestMapping</span><span class="tok-o">(</span><span class="tok-s">&quot;/mail&quot;</span><span class="tok-o">)</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">mail</span><span class="tok-o">()</span> <span class="tok-o">{</span>

		<span class="tok-n">mailSender</span><span class="tok-o">.</span><span class="tok-na">send</span><span class="tok-o">(</span><span class="tok-s">&quot;mail@example.com&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;A test mail&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;Body of the test mail&quot;</span><span class="tok-o">);</span>

		<span class="tok-k">return</span> <span class="tok-s">&quot;Mail sent&quot;</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As you see above, the instance variable <em>mailSender</em> is instantiated with a new MockMailSender. It’s then used in the request handler method to send the mail.</p>
</div>
<div class="paragraph">
<p>If you now run the application and visit <a href="http://localhost:8080/mail" class="bare">http://localhost:8080/mail</a>, you&#8217;ll see “Mail sent” in the browser, and the log lines on the console.</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_3">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/mail-service-created">Source code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependency_injection_the_basics">Dependency Injection - The Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We just wrote some evil code. Guess what?</p>
</div>
<div class="sect2">
<h3 id="_the_problem">The Problem</h3>
<div class="paragraph">
<p>In MailController, we&#8217;ve instantiated a MailSender like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">private</span> <span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">MockMailSender</span><span class="tok-o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Referring to the concrete class <code>MockMailSender</code> above tightly couples it to MailController. In other words, MailController is now <em>depending on</em> MockMailSender. That means, if we ever change our mind to use SmtpMailSender instead of MockMailSender, we’ll need to alter the source code.</p>
</div>
<div class="paragraph">
<p>This kind of tight coupling with concrete classes is evil. It won’t let us switch the implementations easily. For example, we now can&#8217;t use MockMailSender in development environment whereas SmtpMailSender in production.</p>
</div>
<div class="paragraph">
<p>This is where dependency injection comes in. Let&#8217;s see how to do it in Spring.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_spring_way">The Spring Way</h3>
<div class="paragraph">
<p>Using dependency injection of Spring, here is a solution to the above problem:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Annotate MockMailSender with <code>@Component</code>:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">...</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.stereotype.Component</span><span class="tok-o">;</span>

<span class="hll"><span class="tok-nd">@Component</span>
</span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MockMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>

   <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Change instantiating MockMailSender as below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-o">...</span>

<span class="tok-kn">import</span> <span class="tok-nn">javax.annotation.Resource</span><span class="tok-o">;</span>

<span class="tok-o">...</span>

<span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailController</span> <span class="tok-o">{</span>

<span class="hll">	<span class="tok-nd">@Autowired</span>
</span><span class="hll">	<span class="tok-kd">private</span> <span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span> <span class="tok-c1">// no more new MockMailSender()</span>
</span>
<span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the application now and visit <a href="http://localhost:8080/mail" class="bare">http://localhost:8080/mail</a>, and you see it working!</p>
</div>
<div class="sect3">
<h4 id="_so_what_s_happening">So, what’s happening?</h4>
<div class="paragraph">
<p>This is how it worked:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>By annotating MockMailSender with <em>@Component</em>, we told Spring to create an instance of MockMailSender and keep it at "some place" when the application starts.</p>
</li>
<li>
<p>By annotating the mailSender variable  with <em>@Autowired</em>, we told Spring to go to "that place," search for an object of type MailSender, and assign a reference of that to this variable.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>That place, where Spring kept the MockMailSender instance, is called <strong>Application Context</strong>.</p>
</div>
<div class="paragraph">
<p>So, to summarize, Spring maintains an Application Context where it keeps some objects, which are also called <strong>beans</strong>. When a Spring application starts, Spring looks for some metadata&#8201;&#8212;&#8201;like the @Component annotation&#8201;&#8212;&#8201;for building the application context. The <em>@RestController</em> annotation, which our MailController is annotated with, is also like the @Component annotation&#8201;&#8212;&#8201;Spring also creates instances of classes annotated with @RestController. That&#8217;s why when our application started, Spring created a MailController bean as well. That time, seeing that its <em>mailSender</em> field was annotated with the <em>@Autowired</em> annotation, Spring assigned mailSender a reference to the MockMailSender bean that it had already stored in the application context.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary">Summary</h3>
<div class="paragraph">
<p>So, when developing a Spring application, you basically have to know two things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>How to tell Spring to put objects into the application context. i.e. what kind of metadata, like the @Component annotation, to use.</p>
</li>
<li>
<p>How to tell Spring to inject in your code references to the objects in the application context, i.e. what kind of metadata, like the @Autowired annotation, to use.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>There are multiple ways to do these – Spring’s DI is very rich. Next section onwards, we are going to go more deep into these.</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_4">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/di-basics">Source code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_injecting_beans">Injecting Beans</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the last section, we used <em>@Autowired</em> to get a reference to a bean. Let&#8217;s learn more about it.</p>
</div>
<div class="sect2">
<h3 id="_applying_autowired_on_methods">Applying @Autowired on methods</h3>
<div class="paragraph">
<p>@Autowired can be applied not only on fields&#8201;&#8212;&#8201;as we did in the last section&#8201;&#8212;&#8201;but also on instance methods and constructors. See the examples below:</p>
</div>
<div class="listingblock">
<div class="title">Example 1&#8201;&#8212;&#8201;Method injection</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailController</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>

<span class="hll">	<span class="tok-nd">@Autowired</span>
</span>	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">setMailSender</span><span class="tok-o">(</span><span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span><span class="tok-o">)</span> <span class="tok-o">{</span>

	    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">mailSender</span> <span class="tok-o">=</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example 2&#8201;&#8212;&#8201;Constructor injection</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailController</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>

<span class="hll">	<span class="tok-nd">@Autowired</span>
</span>	<span class="tok-kd">public</span> <span class="tok-nf">MailController</span><span class="tok-o">(</span><span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span><span class="tok-o">)</span> <span class="tok-o">{</span>

	    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">mailSender</span> <span class="tok-o">=</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When @Autowired is applied on instance methods or constructors as above, those are called by Spring, and the parameters are injected. There can be more than one parameters&#8201;&#8212;&#8201;all will be injected.</p>
</div>
<div class="paragraph">
<p>The first example is commonly called <strong>setter injection</strong>, because the instance method happens to be a setter in this case. The second example is called <strong>constructor injection</strong>.</p>
</div>
<div class="paragraph">
<p>In the second example, we can actually omit @Autowired (unless you&#8217;re using a Spring version less than 4.3). When Spring will create the instance of MailController, it&#8217;ll call the constructor with all the parameters automatically injected. Had there been more than one constructors though, you would have to annotate one with @Autowired.</p>
</div>
<div class="paragraph">
<p>So, let&#8217;s change our MailController as below:</p>
</div>
<div class="listingblock">
<div class="title">Updated MailController</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailController</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>

	<span class="tok-kd">public</span> <span class="tok-nf">MailController</span><span class="tok-o">(</span><span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">mailSender</span> <span class="tok-o">=</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Test it out, if you wish, by running the application and visiting <a href="http://localhost:8080/mail" class="bare">http://localhost:8080/mail</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_beans_how_to_inject_the_right_one">Multiple beans – how to inject the right one?</h3>
<div class="paragraph">
<p>But what will happen if more than one bean will become eligible for an injection? To check, annotate <em>SmtpMailSender</em> as well with <em>@Component</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="hll"><span class="tok-nd">@Component</span>
</span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SmtpMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Restart the application now, and let&#8217;s see what happens.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Don&#8217;t like restarting manually?</div>
<div class="paragraph">
<p>Do we have to manually restart everytime we change our code? No, if you use Spring Boot&#8217;s <em>Developer tools</em>. To use it, just include the following in the <em>dependencies</em> section of <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span></span><span class="tok-nt">&lt;dependency&gt;</span>
    <span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
    <span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-devtools<span class="tok-nt">&lt;/artifactId&gt;</span>
    <span class="tok-nt">&lt;optional&gt;</span>true<span class="tok-nt">&lt;/optional&gt;</span>
<span class="tok-nt">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next time whenever you change some code and press <em>save</em>, the application will automatically restart if it&#8217;ll be running. Developer tools can do much more than just this&#8201;&#8212;&#8201;refer to its  <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-devtools.html">documentation</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Oops! Trying to restart, we see an error on the console!</p>
</div>
<div class="paragraph">
<p>It’s because, when injecting a MailSender to MailController, Spring found more than one candidate beans&#8201;&#8212;&#8201;the instances of both MockMailSender and SmtpMailSender.</p>
</div>
<div class="paragraph">
<p>So, how to fix this? There are multiple ways&#8201;&#8212;&#8201;let&#8217;s look at a few.</p>
</div>
<div class="sect3">
<h4 id="_dependency_injection_by_name">Dependency injection by name</h4>
<div class="paragraph">
<p>Just rename the parameter of MailController&#8217;s constructor to <code>smtpMailSender</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailController</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>

<span class="hll">	<span class="tok-kd">public</span> <span class="tok-nf">MailController</span><span class="tok-o">(</span><span class="tok-n">MailSender</span> <span class="tok-n">smtpMailSender</span><span class="tok-o">)</span> <span class="tok-o">{</span>
</span>
	    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">mailSender</span> <span class="tok-o">=</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the application now, and it&#8217;ll work!</p>
</div>
<div class="paragraph">
<p>To undertand why it worked, you&#8217;ll have to know two things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Spring gives a <strong>name</strong> to every bean it creates. That means, when creating beans of MockMailSender and SmtpMailSender, Spring gives those some names. By default, the class names in camelCase, i.e. <code>mockMailSender</code> and <code>smtpMailSender</code>, become the names of the beans.</p>
</li>
<li>
<p>In case of ambiguity when injecting a bean, the bean having the same name as the parameter name will be injected. That means, in the above code, because the name of the parameter is <em>smtpMailSender</em>, the smtpMailSender bean will be injected.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This is called <em>dependency injection by name</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_changing_the_name_of_a_bean">Changing the name of a bean</h4>
<div class="paragraph">
<p>The name of a bean can be changed by providing a default attribute to the @Component like annotations. For example, the following will set the name of the SmtpMailSender bean to <code>smtp</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="hll"><span class="tok-nd">@Component</span><span class="tok-o">(</span><span class="tok-s">&quot;smtp&quot;</span><span class="tok-o">)</span>
</span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SmtpMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Test it out by changing the parameter name in MailController to <em>smtp</em>, and then visiting <a href="http://localhost:8080/mail" class="bare">http://localhost:8080/mail</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_5">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/injecting-beans-i">Source code</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_the_primary_annotation">The @Primary annotation</h4>
<div class="paragraph">
<p>Another way to resolve the ambiguity is to annotate one candidate bean class with <code>@Primary</code>. So, annotate MockMailSender with @Primary:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Component</span>
<span class="hll"><span class="tok-nd">@Primary</span>
</span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MockMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Test it out&#8201;&#8212;&#8201;now the MockMailSender should be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bean_qualifiers">Bean qualifiers</h4>
<div class="paragraph">
<p>Spring beans, apart from having a name, will also have a <strong>qualifier</strong>. By default, the qualifier will be same as the name of the bean, but you can override it using the <code>@Qualifier</code> annotation. For example, in the SmtpMailSender class, remove the "smtp" attribute from @Component and add <code>@Qualifier("smtpMail")</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="hll"><span class="tok-nd">@Component</span>
</span><span class="hll"><span class="tok-nd">@Qualifier</span><span class="tok-o">(</span><span class="tok-s">&quot;smtpMail&quot;</span><span class="tok-o">)</span>
</span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SmtpMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In MailController, you can now use the same annotation when injecting the bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailController</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-n">MailSender</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>

	<span class="tok-kd">public</span> <span class="tok-nf">MailController</span><span class="tok-o">(</span>
<span class="hll">	    <span class="tok-nd">@Qualifier</span><span class="tok-o">(</span><span class="tok-s">&quot;smtpMail&quot;</span><span class="tok-o">)</span>
</span>	    <span class="tok-n">MailSender</span> <span class="tok-n">smtp</span><span class="tok-o">)</span> <span class="tok-o">{</span>

	    <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">mailSender</span> <span class="tok-o">=</span> <span class="tok-n">mailSender</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now remove the @Primay annotation from MockMailSender, and test it out!</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
As I told above, removing the @Qualifier annotation from SmtpMailSender will set its qualifier to <em>smtpMailSender</em> by default. You can then use the same, i.e. @Qualifier("smtpMailSender"), in MailController.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_6">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/injecting-beans-ii">Source code</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_constructor_setter_or_field_injection">Constructor, setter or field injection?</h3>
<div class="paragraph">
<p>Now that we have seen <em>constructor</em>, <em>setter</em> and <em>field</em> injections, you may be thinking which one to prefer. The Spring documentation <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-spring-beans-and-dependency-injection.html">recommends</a> <em>constructor</em> injection in general, and we have the same view.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resource_and_inject">@Resource and @Inject</h3>
<div class="paragraph">
<p>Spring also provides a <code>@Resource</code> annotation and supports the Java <a href="http://docs.oracle.com/javaee/6/tutorial/doc/giwhb.html">CDI</a>
JSR-299 <code>@Inject</code> annotation, which are similar to <em>@Autowired</em>. However, @Autowired should be generally preferred&#8201;&#8212;&#8201;it&#8217;s the most powerful and popular one.</p>
</div>
<div class="paragraph">
<p>Functionally there are some subtle differences between these three, which won&#8217;t matter in most cases though. For example, @Resource first tries to match <em>by name</em>, and then falls back to <em>by type</em>. In contrast, @Autowired and
@Inject first try to match by type. David Kessler has written an <a href="http://blogs.sourceallies.com/2011/08/spring-injection-with-resource-and-autowired/">interesting article</a> on it, if you&#8217;re curious.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_beans">Configuring Beans</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we&#8217;ll start discussing how to configure beans, i.e. how to put objects into the application context.</p>
</div>
<div class="sect2">
<h3 id="_component_annotations">Component annotations</h3>
<div class="paragraph">
<p>Spring creates beans for classes annotated with <em>@Component</em> or one of its specializations, e.g.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>@RestController</p>
</li>
<li>
<p>@Controller</p>
</li>
<li>
<p>@Service</p>
</li>
<li>
<p>@Repository</p>
</li>
<li>
<p>@Configuration</p>
</li>
<li>
<p>@SpringBootApplication</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In fact, we have already seen <em>@Component</em> and <em>@RestController</em> in action.</p>
</div>
</div>
<div class="sect2">
<h3 id="_component_scanning">Component scanning</h3>
<div class="paragraph">
<p>The application context is created when the application starts, by calling <code>SpringApplication.run</code> in the main method in the <em>NpSpring5TutorialApplication</em> class.</p>
</div>
<div class="paragraph">
<p>Notice that <em>NpSpringTutorialApplication</em> is annotated with <code>@SpringBootApplication</code>. This tells Spring to scan for classes that are annotated with <em>@Component</em>, or any of its specialization such as <em>@RestController</em>, and create beans for those. By default, scanning will be done only inside the package (and all sub-packages) of the class that&#8217;s is annotated with <em>@SpringBootApplication</em>. If you want some other packages to be scanned as well, there are a few ways to do so. For example, you can pass a <code>scanBasePackageClasses</code> attribute to @SpringBootApplication, as below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@SpringBootApplication</span><span class="tok-o">(</span><span class="tok-n">scanBasePackageClasses</span> <span class="tok-o">=</span> <span class="tok-o">{</span>
    <span class="tok-n">NpSpringTutorialApplication</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">,</span>
    <span class="tok-n">SomeClassInTheOtherPackage</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">})</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Spring will then scan for the packages of all the given classes, including their sub-packages.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_classes">Configuration classes</h3>
<div class="paragraph">
<p>But how to create beans of classes from a third-party JAR, which we can&#8217;t annotate with @Component?</p>
</div>
<div class="paragraph">
<p>In such case, we could use <em>Java configuration classes</em>. To illustrate, remove @Component and any other annotations from SmtpMailSender and MockMailSender. Let them be plain classes, without being aware that they are going to be used by a spring application:</p>
</div>
<div class="listingblock">
<div class="title">Remove @Component from SmtpMailSender and MockMailSender</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="hll"><span class="tok-c1">// @Component</span>
</span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SmtpMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>
	<span class="tok-o">...</span>
<span class="tok-o">}</span>

<span class="hll"><span class="tok-c1">// @Component</span>
</span><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MockMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>
	<span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now create a class, say <code>MailConfig</code>, residing in any package that will be scanned by Spring&#8201;&#8212;&#8201; e.g. in the <em>mail</em> package&#8201;&#8212;&#8201;as below:</p>
</div>
<div class="listingblock">
<div class="title">Java configuration classes</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Configuration</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailConfig</span> <span class="tok-o">{</span>

	<span class="tok-nd">@Bean</span>
	<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">mockMailSender</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">MockMailSender</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>

	<span class="tok-nd">@Bean</span>
	<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">smtpMailSender</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">SmtpMailSender</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Try running the application now, and it&#8217;ll work. How?</p>
</div>
<div class="paragraph">
<p>The <code>@Configuration</code> annotation tells Spring that it’s a configuration class. When the application context is built, the methods that are annotated with <code>@Bean</code> inside such configuration classes are executed, and their return values are stored as beans. The name of the methods become the name of the beans by default.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can have multiple @Configuration classes in an application.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_7">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/configuring-beans">Source code</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_xml_configuration">XML Configuration</h3>
<div class="paragraph">
<p>Like Java configuration classes, we can also use xml files to configure beans. In fact, it was the only way to configure beans in early days of Spring. But it&#8217;s normally avoided nowadays. If you want to learn it though, there&#8217;s ample material lying on the Internet&#8201;&#8212;&#8201;so we’ll not cover it in this book.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_properties">Application properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before moving forward on dependency injection, this’ll be a good time to talk about <em>application properties</em>.</p>
</div>
<div class="paragraph">
<p>Every non-trivial application will have some properties which differ from deployment to deployment. For example, the database connection details will differ in production environment, test environment, and development environment.</p>
</div>
<div class="paragraph">
<p>Spring has multiple ways to handle this. When using Spring Boot, a good way to maintain such properties is to use the <code>application.properties</code> file in the <em>src/main/resources</em> folder.</p>
</div>
<div class="paragraph">
<p>To have a taste of it, let’s change the <em>HelloController</em> to show a variable message, say like this:</p>
</div>
<div class="listingblock">
<div class="title">HelloController</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">HelloController</span> <span class="tok-o">{</span>

<span class="hll">	<span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">appName</span><span class="tok-o">;</span>
</span>
	<span class="tok-nd">@RequestMapping</span><span class="tok-o">(</span><span class="tok-s">&quot;/hello&quot;</span><span class="tok-o">)</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">hello</span><span class="tok-o">()</span> <span class="tok-o">{</span>

<span class="hll">		<span class="tok-k">return</span> <span class="tok-s">&quot;Hello, world &quot;</span> <span class="tok-o">+</span> <span class="tok-n">appName</span><span class="tok-o">;</span>
</span>	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Let’s now set <code>appName</code> from <em>application.properties</em>. To do so, first add a line in application.properties, as below:</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>app.name <span class="tok-o">=</span> Dev Env</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The '=' above can also be a ':'
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then, annotate the <em>appName</em> variable in HelloController with <code>@Value("${app.name}")</code>, as below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">HelloController</span> <span class="tok-o">{</span>

<span class="hll">	<span class="tok-nd">@Value</span><span class="tok-o">(</span><span class="tok-s">&quot;${app.name}&quot;</span><span class="tok-o">)</span>
</span>	<span class="tok-kd">private</span> <span class="tok-n">String</span> <span class="tok-n">appName</span><span class="tok-o">;</span>

    <span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will inject <em>app.name</em> property to the <em>appName</em> variable.</p>
</div>
<div class="paragraph">
<p>Now run the application and visit <a href="http://localhost:8080/hello">http://localhost:8080/hello</a>&#8201;&#8212;&#8201;you&#8217;ll see "<em>Hello, world Dev Env</em>."</p>
</div>
<div class="sect2">
<h3 id="_deploying_to_a_different_environment">Deploying to a different environment</h3>
<div class="paragraph">
<p>So, how to make the property value different in a different environment?</p>
</div>
<div class="paragraph">
<p>There are many ways to do it. A simple way is to place a different <em>application.properties</em> in the folder where application JAR is deployed. Property values in that external application.properties will override those in the internal application.properties.</p>
</div>
<div class="paragraph">
<p>To see it working, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Package the application. A simple way for this in STS is to right click on the project in the package explorer and choose <em>Debug As &#8594; Maven install</em>. This will create the application JAR inside the <em>target</em> folder, named <em>spring5-tutorial-0.0.1-SNAPSHOT.jar</em>.</p>
</li>
<li>
<p>Copy that JAR to some other location, and put a new <em>application.properties</em> file in that location, looking as below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">External application.properties</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="properties"><span></span><span class="tok-na">app.name</span><span class="tok-o">:</span> <span class="tok-s">Prod Env</span></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Stop the application if it&#8217;s already running in the IDE.</p>
</li>
<li>
<p>Open a console, <em>cd</em> to that folder and run the JAR using the command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Running the application</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>java -jar spring5-tutorial-0.0.1-SNAPSHOT.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now visit <a href="http://localhost:8080/hello" class="bare">http://localhost:8080/hello</a> and you should see the overridden hello message.</p>
</div>
<div class="paragraph">
<p>So, this was a very simple example of setting property values externally. Spring Boot is very powerful in this area, providing lots of options suiting all kinds of scenarios. Spring Boot reference material has <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">exhaustive documentation</a> on it, and in our <a href="http://www.naturalprogrammer.com/spring-tutorial/">Module IV</a> we&#8217;ll discuss an elegant pattern for externalizing configuration in real-world applications.</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_8">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/application-propertiess">Source code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_profiles">Spring profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Spring application can be configured to behave differently in different environments by using <em>profiles</em>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say you are developing an application for two kinds of businesses – <em>book shops</em> and <em>grocery shops</em>. Also, your application runs on different environments, say <em>development</em>, <em>test</em> and <em>production</em>. Under this scenario, you can plan to have five profiles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>book</p>
</li>
<li>
<p>grocery</p>
</li>
<li>
<p>dev</p>
</li>
<li>
<p>test</p>
</li>
<li>
<p>prod</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can then activate one or more profiles in a deployment by providing a <code>spring.profiles.active</code> property. For example, to activate <em>book</em> and <em>prod</em> profiles, add the following line in <em>application.properties</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>spring.profiles.active: book,prod</code></pre>
</div>
</div>
<div class="paragraph">
<p>But, how to use these?</p>
</div>
<div class="paragraph">
<p>You can configure your beans based on the active profiles. Let’s say we are going to use the MockMailSender only in development environment, i.e. when <em>dev</em> is an active profile. Otherwise, we are going to use the SmtpMailSender. To configure so, annotate the bean methods with <code>@Profile(&#8230;&#8203;)</code>, as below:</p>
</div>
<div class="listingblock">
<div class="title">Using @Profile annotation</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Configuration</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailConfig</span> <span class="tok-o">{</span>

	<span class="tok-nd">@Bean</span>
<span class="hll">	<span class="tok-nd">@Profile</span><span class="tok-o">(</span><span class="tok-s">&quot;dev&quot;</span><span class="tok-o">)</span>
</span>	<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">mockMailSender</span><span class="tok-o">()</span> <span class="tok-o">{</span>

		<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">MockMailSender</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>

	<span class="tok-nd">@Bean</span>
<span class="hll">	<span class="tok-nd">@Profile</span><span class="tok-o">(</span><span class="tok-s">&quot;!dev&quot;</span><span class="tok-o">)</span>
</span>	<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">smtpMailSender</span><span class="tok-o">()</span> <span class="tok-o">{</span>

		<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">SmtpMailSender</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, remove the <em>@Qualifier</em> annotation from MailController&#8217;s constructor, because the above code will anyway ensure that only one MailSender will be available in the application context:</p>
</div>
<div class="listingblock">
<div class="title">Remove @Qualifier from MailController&#8217;s constructor</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="hll"><span class="tok-kd">public</span> <span class="tok-nf">MailController</span><span class="tok-o">(</span><span class="tok-n">MailSender</span> <span class="tok-n">smtp</span><span class="tok-o">)</span> <span class="tok-o">{</span>
</span>	<span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">mailSender</span> <span class="tok-o">=</span> <span class="tok-n">smtp</span><span class="tok-o">;</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Test the application now by altering <em>spring.profiles.active</em>, and you’ll see how the configured MailSender changes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
@Profile can be used not only on bean methods, but also on component and configuration classes.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_9">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/profiles">Source code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conditional_annotations">Conditional annotations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The @Profile annotation, as we saw, can be used to include or exclude beans based on the active profiles. Spring also provides a <code>@Condidional</code> annotation that&#8217;s more generic; it can be used to include or exclude beans based on arbitrary conditions that we can provide.</p>
</div>
<div class="paragraph">
<p>In fact, Spring Boot comes with some variants of @Condidional&#8201;&#8212;&#8201;such as <em>@ConditionalOnClass</em>, <em>@ConditionalOnProperty</em> and <em>@ConditionalOnMissingBean</em>&#8201;&#8212;&#8201;and uses those vigorously to automatically configure the beans based on conditions like what classes are on the classpath, what properties are
available in application.properties, what beans are already provided by the
developer, etc. See its <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-auto-configuration.html#boot-features-condition-annotations">reference
material</a> for more details.</p>
</div>
<div class="paragraph">
<p>Let’s try an example. Say we will use the SmtpMailSender only if in our
<em>application.properties</em> we have a property named <code>spring.mail.host</code>; otherwise we&#8217;ll use MockMailSender.</p>
</div>
<div class="paragraph">
<p>So, remove the @Profile annotations from MailConfig and add <em>@ConditionalOnProperty</em> annotations as below:</p>
</div>
<div class="listingblock">
<div class="title">Using @ConditionalOnProperty</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Configuration</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailConfig</span> <span class="tok-o">{</span>

	<span class="tok-nd">@Bean</span>
<span class="hll">	<span class="tok-nd">@ConditionalOnProperty</span><span class="tok-o">(</span><span class="tok-n">name</span><span class="tok-o">=</span><span class="tok-s">&quot;spring.mail.host&quot;</span><span class="tok-o">,</span>
</span><span class="hll">			<span class="tok-n">havingValue</span><span class="tok-o">=</span><span class="tok-s">&quot;foo&quot;</span><span class="tok-o">,</span> <span class="tok-n">matchIfMissing</span><span class="tok-o">=</span><span class="tok-kc">true</span><span class="tok-o">)</span>
</span>	<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">mockMailSender</span><span class="tok-o">()</span> <span class="tok-o">{</span>

		<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">MockMailSender</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>

	<span class="tok-nd">@Bean</span>
<span class="hll">	<span class="tok-nd">@ConditionalOnProperty</span><span class="tok-o">(</span><span class="tok-s">&quot;spring.mail.host&quot;</span><span class="tok-o">)</span>
</span>	<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">smtpMailSender</span><span class="tok-o">()</span> <span class="tok-o">{</span>

		<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">SmtpMailSender</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The first use of <em>@ConditionalOnProperty</em> above will configure a MockMailSender only if there is a property <em>spring.mail.host</em> with value <code>foo</code>, or there is no such property. Wherever we will plan to use MockMailSender, we will provide no such property, and so it&#8217;ll work.</p>
</div>
<div class="paragraph">
<p>The second use of <em>@ConditionalOnProperty</em> will configure an SmtpMailSender only when <em>spring.mail.host</em> is provided.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Did you realize that if you provided a <em>spring.mail.host</em> property with value <code>foo</code>, our application would fail&#8201;&#8212;&#8201;because both the conditions will be satisfied, and Spring will create both the beans. Then, the injection in the MailController constructor will find multiple beans, and will scream.</p>
</div>
<div class="paragraph">
<p>However, practically no SMTP host would be named as <em>foo</em>, and so the above code would work.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Before testing it out, let&#8217;s clean up a bit. We no more need <em>spring.profiles.active</em> in <em>application.properties</em>&#8201;&#8212;&#8201;remove that. Why not also remove the <em>app.name</em>.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll also need to need to remove <em>app.name</em> from HelloController, reverting it to:</p>
</div>
<div class="listingblock">
<div class="title">HelloController</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">HelloController</span> <span class="tok-o">{</span>

	<span class="tok-nd">@RequestMapping</span><span class="tok-o">(</span><span class="tok-s">&quot;/hello&quot;</span><span class="tok-o">)</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">hello</span><span class="tok-o">()</span> <span class="tok-o">{</span>

		<span class="tok-k">return</span> <span class="tok-s">&quot;Hello, world &quot;</span><span class="tok-o">;</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then add a <em>spring.mail.host</em> in application.properties, say as below:</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="properties"><span></span><span class="tok-na">spring.mail.host</span><span class="tok-o">:</span> <span class="tok-s">smtp.gmail.com</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Test the application now, and you&#8217;ll see SmtpMailSender configured. Then, remove <em>spring.mail.host</em> from <em>application.properties</em> and you&#8217;ll see MockMailSender configured.</p>
</div>
<div class="paragraph">
<p>Refer the <a href="http://docs.spring.io/autorepo/docs/spring-boot/current/api/org/springframework/boot/autoconfigure/condition/ConditionalOnProperty.html">Javadoc</a> of <em>@ConditionalOnProperty</em> to know more about it.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Don’t use <em>@ConditionalOnBean</em> and <em>@ConditionalOnMissingBean</em> unless you are sure of the bean creation order. For more details, see this <a href="http://stackoverflow.com/questions/27568728/spring-configuration-class-loading-order-with-spring-boot-conditionalonmissingb/27570811">stackoverflow</a> post. Spring Boot’s auto configuration controls the bean creation order, and so Spring Boot uses these without any problem, though. It’s an advanced topic, and we&#8217;ll discuss about it in <a href="http://www.naturalprogrammer.com/spring-tutorial/">Module IV</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_10">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/conditional">Source code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sending_smtp_mails">Sending SMTP Mails</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we’ll see how to send SMTP mails from Spring. We’ll also learn some more dependency injection concepts in the process.</p>
</div>
<div class="sect2">
<h3 id="_configuring_a_javamailsender">Configuring a JavaMailSender</h3>
<div class="paragraph">
<p>For sending SMTP mails, Spring comes with a <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mail.html">JavaMailSender</a>. So, we can plan to configure a JavaMailSender bean, inject that into SmtpMailSender and then use that to send SMTP mails.</p>
</div>
<div class="paragraph">
<p>Spring Boot will <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-email.html">auto-configure</a> a JavaMailSender if it&#8217;s found in the classpath and some properties are set. To add it to classpath, simply include the following in <em>pom.xml</em>, in the <em>dependencies</em> section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span></span><span class="tok-nt">&lt;dependency&gt;</span>
	<span class="tok-nt">&lt;groupId&gt;</span>org.springframework.boot<span class="tok-nt">&lt;/groupId&gt;</span>
	<span class="tok-nt">&lt;artifactId&gt;</span>spring-boot-starter-mail<span class="tok-nt">&lt;/artifactId&gt;</span>
<span class="tok-nt">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, for the JavaMailSender to be configured properly, we&#8217;ll need to specify a few properties in <em>application.properties</em>. The exact properties to be specified will depend on the SMTP service that we&#8217;re planning to use. Looking at <a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/mail/MailProperties.java">MailProperties.java</a> will give you a hint.  For using Gmail, specify the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="properties"><span></span><span class="tok-na">spring.mail.host</span> <span class="tok-o">=</span> <span class="tok-s">smtp.gmail.com</span>
<span class="tok-na">spring.mail.username</span> <span class="tok-o">=</span> <span class="tok-s">from_gmail_id@gmail.com</span>
<span class="tok-na">spring.mail.password</span> <span class="tok-o">=</span> <span class="tok-s">an_application_password</span>

<span class="tok-na">spring.mail.properties.mail.smtp.auth</span> <span class="tok-o">=</span> <span class="tok-s">true</span>
<span class="tok-na">spring.mail.properties.mail.smtp.socketFactory.port</span> <span class="tok-o">=</span> <span class="tok-s">465</span>
<span class="tok-na">spring.mail.properties.mail.smtp.socketFactory.class</span> <span class="tok-o">=</span> <span class="tok-s">javax.net.ssl.SSLSocketFactory</span>
<span class="tok-na">spring.mail.properties.mail.smtp.socketFactory.fallback</span> <span class="tok-o">=</span> <span class="tok-s">false</span>
<span class="tok-na">spring.mail.properties.mail.smtp.ssl.enable</span> <span class="tok-o">=</span> <span class="tok-s">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="mailto:from_gmail_id@gmail.com">from_gmail_id@gmail.com</a> above is the ID from which the mails will be sent. Replace it with an ID that you own. Similarly, replace <em>an_application_password</em> with one of your application passwords.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
For using Gmail service, you must have activated <a href="https://www.google.com/landing/2step/">2-step verification</a>, and the
password given above should be an <a href="https://support.google.com/accounts/answer/185833?hl=en">application
password</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_coding_our_smtpmailsender">Coding our SmtpMailSender</h3>
<div class="paragraph">
<p>Let’s now update our SmtpMailSender to send real mails, using the JavaMailSender. It&#8217;ll look as below:</p>
</div>
<div class="listingblock">
<div class="title">SmtpMailSender</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</div></td><td class="code"><span></span><span class="tok-kn">package</span> <span class="tok-nn">com.naturalprogrammer.spring5tutorial.mail</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">javax.mail.MessagingException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">javax.mail.internet.MimeMessage</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.mail.javamail.JavaMailSender</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.springframework.mail.javamail.MimeMessageHelper</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">SmtpMailSender</span> <span class="tok-kd">implements</span> <span class="tok-n">MailSender</span> <span class="tok-o">{</span>

    <span class="tok-kd">private</span> <span class="tok-n">JavaMailSender</span> <span class="tok-n">javaMailSender</span><span class="tok-o">;</span>

    <span class="tok-kd">public</span> <span class="tok-nf">SmtpMailSender</span><span class="tok-o">(</span><span class="tok-n">JavaMailSender</span> <span class="tok-n">javaMailSender</span><span class="tok-o">)</span> <span class="tok-o">{</span>

        <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">javaMailSender</span> <span class="tok-o">=</span> <span class="tok-n">javaMailSender</span><span class="tok-o">;</span>
    <span class="tok-o">}</span>

    <span class="tok-nd">@Override</span>
    <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">send</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">to</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">subject</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">body</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">MessagingException</span> <span class="tok-o">{</span>

        <span class="tok-n">MimeMessage</span> <span class="tok-n">message</span> <span class="tok-o">=</span> <span class="tok-n">javaMailSender</span><span class="tok-o">.</span><span class="tok-na">createMimeMessage</span><span class="tok-o">();</span>
        <span class="tok-n">MimeMessageHelper</span> <span class="tok-n">helper</span><span class="tok-o">;</span>

        <span class="tok-n">helper</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">MimeMessageHelper</span><span class="tok-o">(</span><span class="tok-n">message</span><span class="tok-o">,</span> <span class="tok-kc">true</span><span class="tok-o">);</span> <span class="tok-c1">// true indicates</span>
                                                       <span class="tok-c1">// multipart message</span>
        <span class="tok-n">helper</span><span class="tok-o">.</span><span class="tok-na">setSubject</span><span class="tok-o">(</span><span class="tok-n">subject</span><span class="tok-o">);</span>
        <span class="tok-n">helper</span><span class="tok-o">.</span><span class="tok-na">setTo</span><span class="tok-o">(</span><span class="tok-n">to</span><span class="tok-o">);</span>
        <span class="tok-n">helper</span><span class="tok-o">.</span><span class="tok-na">setText</span><span class="tok-o">(</span><span class="tok-n">body</span><span class="tok-o">,</span> <span class="tok-kc">true</span><span class="tok-o">);</span> <span class="tok-c1">// true indicates html</span>

        <span class="tok-c1">// continue using helper for more functionalities</span>
        <span class="tok-c1">// like adding attachments, etc.</span>

        <span class="tok-n">javaMailSender</span><span class="tok-o">.</span><span class="tok-na">send</span><span class="tok-o">(</span><span class="tok-n">message</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In lines 11-16, we declare a JavaMailSender instance variable and a constructor for injecting that. In lines 21-33, we create a MimeMessage and then a <a href="http://goo.gl/qpQUdu">MimeMessageHelper</a>. Using that helper, we then set the <em>subject</em>, <em>to</em>, etc. Finally, we send the mail using the <em>javaMailSender</em>.</p>
</div>
<div class="paragraph">
<p>The above send method has now a <em>throws</em> declaration, which also needs to be added to the MailSender interface and the MailController:</p>
</div>
<div class="listingblock">
<div class="title">MailSender</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">MailSender</span> <span class="tok-o">{</span>

    <span class="tok-kt">void</span> <span class="tok-nf">send</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">to</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">subject</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">body</span><span class="tok-o">)</span>
<span class="hll">        <span class="tok-kd">throws</span> <span class="tok-n">MessagingException</span><span class="tok-o">;</span>
</span><span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">MailController</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@RestController</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailController</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>

	<span class="tok-nd">@RequestMapping</span><span class="tok-o">(</span><span class="tok-s">&quot;/mail&quot;</span><span class="tok-o">)</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">mail</span><span class="tok-o">()</span>
<span class="hll">	    <span class="tok-kd">throws</span> <span class="tok-n">MessagingException</span> <span class="tok-o">{</span>
</span>	<span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_inject_javamailsender">How to inject JavaMailSender</h3>
<div class="paragraph">
<p>Looking at the SmtpMailSender code above, you may be thinking that the javaMailSender variable there&#8217;ll be injected by Spring, because we&#8217;ve provided a constructor that should be implicitly @Autowired.</p>
</div>
<div class="paragraph">
<p>Nope, that&#8217;s wrong, because we haven&#8217;t annotated the class with @Component, and so Spring won&#8217;t create the bean for the class. Instead, we create the bean for the class manually&#8201;&#8212;&#8201;in the <em>smtpMailSender</em> method of <em>MailConfig</em> class, if you remember. So, we&#8217;ll have to inject the variable manually.</p>
</div>
<div class="paragraph">
<p>One way to do so would be autowiring a JavaMailSender in MailConfig, and supplying that when calling SmtpMailSender&#8217;s constructor in the <em>smtpMailSender</em> method, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</div></td><td class="code"><span></span><span class="tok-nd">@Configuration</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailConfig</span> <span class="tok-o">{</span>

<span class="hll">    <span class="tok-nd">@Autowired</span>
</span><span class="hll">    <span class="tok-kd">private</span> <span class="tok-n">JavaMailSender</span> <span class="tok-n">javaMailSender</span><span class="tok-o">;</span>
</span>
    <span class="tok-o">...</span>

	<span class="tok-nd">@Bean</span>
	<span class="tok-nd">@ConditionalOnProperty</span><span class="tok-o">(</span><span class="tok-s">&quot;spring.mail.host&quot;</span><span class="tok-o">)</span>
	<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">smtpMailSender</span><span class="tok-o">()</span> <span class="tok-o">{</span>

<span class="hll">		<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">SmtpMailSender</span><span class="tok-o">(</span><span class="tok-n">javaMailSender</span><span class="tok-o">);</span>
</span>	<span class="tok-o">}</span>
<span class="tok-o">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of autowiring the javaMailSender using field injection as above (lines 4-5), we can also use setter or constructor injection. But, we also can just supply a JavaMailSender as a parameter to the smtpMailSender method, which&#8217;ll look much cleaner:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Configuration</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailConfig</span> <span class="tok-o">{</span>

    <span class="tok-o">...</span>

	<span class="tok-nd">@Bean</span>
	<span class="tok-nd">@ConditionalOnProperty</span><span class="tok-o">(</span><span class="tok-s">&quot;spring.mail.host&quot;</span><span class="tok-o">)</span>
<span class="hll">	<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">smtpMailSender</span><span class="tok-o">(</span><span class="tok-n">JavaMailSender</span> <span class="tok-n">javaMailSender</span><span class="tok-o">)</span> <span class="tok-o">{</span>
</span>
		<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">SmtpMailSender</span><span class="tok-o">(</span><span class="tok-n">javaMailSender</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters of methods annotated with <em>@Bean</em> are injected by Spring, and so the above works.</p>
</div>
<div class="paragraph">
<p>Test sending SMTP mails now! When visiting <a href="http://localhost:8080/mail" class="bare">http://localhost:8080/mail</a>, you&#8217;ll now notice that the page will stall for a second or two. To avoid that, we should send mails asynchronously, which we&#8217;ll discuss in <a href="http://www.naturalprogrammer.com/spring-tutorial/">Module III</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_11">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/smtp-mails">Source code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_caching_bean_methods">Caching Bean Methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The return values of @Bean methods inside @Configuration classes are cached. Calling a bean method a second time returns the cached value instead of re-executing the method.</p>
</div>
<div class="paragraph">
<p>To illustrate, let&#8217;s create a <em>DemoBean</em> in the <em>mail</em> package, as below:</p>
</div>
<div class="listingblock">
<div class="title">DemoBean</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-kn">import</span> <span class="tok-nn">org.apache.commons.logging.Log</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">org.apache.commons.logging.LogFactory</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">DemoBean</span> <span class="tok-o">{</span>

    <span class="tok-kd">public</span> <span class="tok-nf">DemoBean</span><span class="tok-o">()</span> <span class="tok-o">{</span>

        <span class="tok-n">log</span><span class="tok-o">.</span><span class="tok-na">info</span><span class="tok-o">(</span><span class="tok-s">&quot;Demo bean created&quot;</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It just writes a log line when created. Then, let’s configure it in MailConfig:</p>
</div>
<div class="listingblock">
<div class="title">MailConfig</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Configuration</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">MailConfig</span> <span class="tok-o">{</span>

	<span class="tok-o">...</span>

	<span class="tok-nd">@Bean</span>
	<span class="tok-kd">public</span> <span class="tok-n">DemoBean</span> <span class="tok-nf">demoBean</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-n">DemoBean</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>

	<span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>So, when the application starts, a <code>demoBean</code> bean will be created. Now, if you want to use that bean in another bean method, say inside the <em>smtpMailSender</em> method, what will you do?</p>
</div>
<div class="paragraph">
<p>You already know a couple of ways to do so. You can use <em>@Autowired</em> to inject that as an instance variable just like injecting any other bean, or you can have that as a parameter of the <em>smtpMailSender</em> method. Having that as a parameter will look like this:</p>
</div>
<div class="listingblock">
<div class="title">smtpMailSender with demoBean parameter</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Bean</span>
<span class="tok-nd">@ConditionalOnProperty</span><span class="tok-o">(</span><span class="tok-s">&quot;spring.mail.host&quot;</span><span class="tok-o">)</span>
<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">smtpMailSender</span><span class="tok-o">(</span><span class="tok-n">JavaMailSender</span> <span class="tok-n">javaMailSender</span><span class="tok-o">,</span>
<span class="hll">    <span class="tok-n">DemoBean</span> <span class="tok-n">demoBean</span><span class="tok-o">)</span> <span class="tok-o">{</span>
</span>
	<span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can also simply call the demoBean() method, as below!</p>
</div>
<div class="listingblock">
<div class="title">smtpMailSender calling demoBean()</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Bean</span>
<span class="tok-nd">@ConditionalOnProperty</span><span class="tok-o">(</span><span class="tok-s">&quot;spring.mail.host&quot;</span><span class="tok-o">)</span>
<span class="tok-kd">public</span> <span class="tok-n">MailSender</span> <span class="tok-nf">smtpMailSender</span><span class="tok-o">(</span><span class="tok-n">JavaMailSender</span> <span class="tok-n">javaMailSender</span><span class="tok-o">)</span> <span class="tok-o">{</span>

<span class="hll">    <span class="tok-n">demoBean</span><span class="tok-o">();</span>
</span>
	<span class="tok-o">...</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But, will not the <em>demoBean()</em> method be called twice now&#8201;&#8212;&#8201;once when Spring calls it to create the bean, and a second time when we will call it inside the smtpMailSender method?</p>
</div>
<div class="paragraph">
<p>No. In contrast, bean creation methods in configuration classes run only once. Spring caches their return values, and returns those in subsequent calls. So, <em>demoBean()</em> will execute only once. To check it out, run the application and see that the log line in DemoBean&#8217;s constructor is written only once.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
But there can be bean creation methods in @Component classes as well, and their return values aren&#8217;t cached. You can test it out by replacing <em>@Configuration</em> with <em>@Component</em> on MailConfig.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The code that we wrote in this section was solely for demo purpose. Rollback that before proceeding. Also, comment the <em>spring.mail.host</em> line in application.properties:</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="properties"><span></span><span class="hll"><span class="tok-c"># spring.mail.host = smtp.gmail.com</span>
</span><span class="tok-na">spring.mail.username</span> <span class="tok-o">=</span> <span class="tok-s">from_gmail_id@gmail.com</span>
<span class="tok-na">spring.mail.password</span> <span class="tok-o">=</span> <span class="tok-s">an_application_password</span>

<span class="tok-na">spring.mail.properties.mail.smtp.auth</span> <span class="tok-o">=</span> <span class="tok-s">true</span>
<span class="tok-na">spring.mail.properties.mail.smtp.socketFactory.port</span> <span class="tok-o">=</span> <span class="tok-s">465</span>
<span class="tok-na">spring.mail.properties.mail.smtp.socketFactory.class</span> <span class="tok-o">=</span> <span class="tok-s">javax.net.ssl.SSLSocketFactory</span>
<span class="tok-na">spring.mail.properties.mail.smtp.socketFactory.fallback</span> <span class="tok-o">=</span> <span class="tok-s">false</span>
<span class="tok-na">spring.mail.properties.mail.smtp.ssl.enable</span> <span class="tok-o">=</span> <span class="tok-s">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Above will configure back the MockMailSender, which we plan to use in future sections.</p>
</div>
<div class="sect2">
<h3 id="_source_code_so_far_12">Source code so far</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/naturalprogrammer/np-spring5-tutorial/tree/code-cleanup">Source code</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Congratulations, you just finished the first module!</p>
</div>
<div class="paragraph">
<p>You should now have a solid understanding of Spring’s dependency injection concepts and commonly used real-world features. Of course there is much more to learn&#8201;&#8212;&#8201;Spring’s DI is very rich. For example, we covered only singleton beans, but beans in application context can have <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-scopes">narrower scopes</a> as well. We also didn&#8217;t talk about the <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-lifecycle">lifecycle callbacks</a>, e.g. how to execute a method when a bean is created or destroyed (we&#8217;re going to discuss it in Module III, though).</p>
</div>
<div class="paragraph">
<p>What should be your next step, then? You can now choose to either learn those advanced DI features, or move forward and learn other Spring projects like MVC, Security, Data, etc.. I would recommend the latter&#8201;&#8212;&#8201;we&#8217;ve already covered DI well enough, and you can always get back and refer to some advanced thing if needed.</p>
</div>
<div class="paragraph">
<p>So, time to move forward to the next module of our course, which covers Spring MVC! It&#8217;s currently available only in video version; the e-book will be added soon.  Do register even if you don&#8217;t like videos though, because it&#8217;s free now, and you&#8217;ll get notified when the e-book will be released! <a href="https://gum.co/YWvp/associate">Click here</a> to register, or <a href="http://www.naturalprogrammer.com/spring-tutorial/">click here</a> to know more about the full course.</p>
</div>
<div class="paragraph">
<p>See you there!</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-09-21 12:00:43 India Standard Time
</div>
</div>
</body>
</html>